<!DOCTYPE html>
<!--
		RiverStatusBoard: Information for Rowers and Paddlers
		Allegheny River information for Three Rivers Rowing Association (TRRA)
		by Maxwell B Garber <max.garber+dev@gmail.com>
		index.html created on 2017-06-26
-->
<html lang="en">
	<head>
		<!-- meta -->
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		
		<!-- Content Security Policies: I don't know how these work yet, so I'm not enabling them
		<meta http-equiv="Content-Security-Policy" content="default-src http://api.openweathermap.org; child-src 'none'; object-src 'none'">
		<meta http-equiv="Content-Security-Policy" content="default-src http://maxgarber.github.io; child-src 'none'; object-src 'none'">
		-->
		
		<title>River Status Board</title>
		
		<!-- RequireJS
			<script data-main="./scripts/main" src="./scripts/require-2.3.3.js"></script>
		-->
		
		<!-- jQuery -->
		<script src="./scripts/libs/jquery-3.2.1.min.js"></script>
		<script src="./scripts/libs/jQueryRotate.js"></script>
		<!-- Moment -->
		<script src="./scripts/libs/moment-2.18.1.min.js"></script>
		<!-- Knockout -->
		<script src="./scripts/libs/knockout-3.4.2.js"></script>
		<!-- Chart -->
		<script src="./scripts/libs/Chart-2.6.0.min.js"></script>
		
		<!-- custom API management scheme -->
		<script src="./scripts/apiClients/gov.weather.js"></script>
		<script src="./scripts/apiClients/gov.usgs.js"></script>
		<script src="./scripts/apiClients/org.sunrise-sunset.js"></script>
		<script src="./scripts/apiClients/org.openweathermap.js"></script>
		<script src="./scripts/apiConcierge.js"></script>
		
		<!-- TRRA dashbaord functions -->
		<script src="./scripts/trra-safety.js"></script>
		
		<!-- the app itself -->
		<script src="./scripts/app.js"></script>
		<script src="./scripts/main.js"></script>
		<script src="./scripts/graph.js"></script>
		
		<!-- Custom Styles -->
		<link rel="stylesheet" type="text/css" href="./styles.css">
		
		<!-- Bootstrap -->
		<link href="./lib/bootstrap-3.3.7-dist/css/bootstrap.min.css" rel="stylesheet">
		<script src="./lib/bootstrap-3.3.7-dist/js/bootstrap.min.js"></script>
		<!--[if lt IE 9]>
			<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
			<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
		<![endif]-->
	</head>
	
	<body id="koBindingContext">
		<div id="container-outer">
			<div id="container-inner">
				<div class="container-fluid center-block">
					
					<!-- BEGIN Title Row -->
					<div class="row bottom-border" id="titleRow">
						<div class="col-lg-3 col-md-3 col-sm-0 col-xs-0 text-left"></div>
						<div class="col-lg-6 col-md-6 col-sm-12 col-xs-12 text-center">
							<h1>Allegheny River Conditions</h1>
						</div>
						<div class="col-lg-1 col-md-1 col-sm-1 col-xs-1 text-right" id="lastUpdatedCol">
							<span class="" data-bind="visible: lastUpdatedVisible">updated:</span>
							<span class="label label-default" id="lastUpdatedLabel" data-bind="{ visible: lastUpdatedVisible, text: lastUpdated }"></span>
						</div>
						<div class="col-lg-2 col-md-3 col-sm-12 col-xs-12 text-center" id="controlCells">
							<h2>
								<span class="glyphicon glyphicon-refresh controlElement" id="refresh-button"
									data-bind="click: manualRefresh"></span>
								<span class="controlCellSpacer"></span>
								<span class="glyphicon glyphicon-info-sign controlElement" id="attribution-info-toggle" data-bind="click: toggleAttribution"></span>
							</h2>
						</div>
					</div>
					<!-- END Title Row -->
					
					<!--  BEGIN Current Conditions, Zone, & Rules Row -->
					<div class="row bottom-border" id="conditionsRow">
						
						<!-- BEGIN Current Values Table -->
						<div class="col-lg-4 col-md-6 col-sm-12 col-xs-12 text-center">
							<h2>Now</h2>
							<div id="now-data-container" class="container-fluid">
								<!-- flow rate -->
								<div class="row now-value-row">
									<div class="col-lg-4 col-md-4 col-sm-6 col-xs-4 text-right now-value-name">
										<span>Flow</span>
									</div>
									<div class="col-lg-8 col-md-8 col-sm-6 col-xs-8 text-left now-value-value">
										<span class="label label-default" id="dataField-flow" 
											data-bind="{ text: waterFlow, style: { 'background-color': waterFlowColor } }"></span>
										<span class="now-value-units" data-bind="text: waterFlowUnits"></span>
									</div>
								</div>
								<!-- water temperature -->
								<div class="row now-value-row">
									<div class="col-lg-4 col-md-4 col-sm-6 col-xs-4 text-right now-value-name">
										<span>Water</span>
									</div>
									<div class="col-lg-8 col-md-8 col-sm-6 col-xs-8 text-left now-value-value">
										<span class="label label-default" id="dataField-temp"
											data-bind="{ text: waterTemp, style: { 'background-color': waterTempColor }}"></span>
										<span class="now-value-units" data-bind="text: waterTempUnits"></span>
										<!-- now show it in fahrenheit for the rubes -->
										<span class="label label-default" id="dataField-temp"
											data-bind="{ text: waterTempF, style: { 'background-color': waterTempColor } }"></span>
										<span class="now-value-units">ËšF</span>
									</div>
								</div>
								<!-- water height -->
								<div class="row now-value-row">
									<div class="col-lg-4 col-md-4 col-sm-6 col-xs-4 text-right now-value-name">
										<span>Gauge</span>
									</div>
									<div class="col-lg-8 col-md-8 col-sm-6 col-xs-8 text-left now-value-value">
										<span class="label label-default" id="dataField-flood" data-bind="text: waterLevel"></span>
										<span class="now-value-units" data-bind="text: waterLevelUnits"></span>
									</div>
								</div>
								<!-- air temperature -->
								<div class="row now-value-row" data-bind="visible: airPropertiesEnabled">
									<div class="col-lg-4 col-md-4 col-sm-6 col-xs-3 text-right now-value-name">
										<span>Air</span>
									</div>
									<div class="col-lg-8 col-md-8 col-sm-6 col-xs-9 text-left now-value-value">
										<span class="label label-default" id="dataField-air" data-bind="text: airTemp"></span>
										<span class="now-value-units" data-bind="text: airTempUnits"></span>
									</div>
								</div>
								<!-- wind -->
								<div class="row now-value-row" data-bind="visible: airPropertiesEnabled">
									<div class="col-lg-4 col-md-4 col-sm-6 col-xs-3 text-right now-value-name">
										<span>Wind</span>
									</div>
									<div class="col-lg-8 col-md-8 col-sm-6 col-xs-9 text-left now-value-value">
										<span class="label label-default" id="dataField-windSpeed" data-bind="text: airSpeed"></span>
										<span class="now-value-units" data-bind="text: airSpeedUnits"></span>
										<span id="dataField-windDirxn" data-bind="text: airDirxn"></span>
									</div>
								</div>
								<!-- sunrise -->
								<div class="row now-value-row">
									<div class="col-lg-4 col-md-4 col-sm-6 col-xs-4 text-right now-value-name">
										<span>Sunrise</span>
									</div>
									<div class="col-lg-8 col-md-8 col-sm-6 col-xs-8 text-left now-value-value">
										<span class="label label-default" id="dataField-dawn" data-bind="text: sunriseText"></span>
									</div>
								</div>
								<!-- sunset -->
								<div class="row now-value-row">
									<div class="col-lg-4 col-md-4 col-sm-6 col-xs-4 text-right now-value-name">
										<span>Sunset</span>
									</div>
									<div class="col-lg-8 col-md-8 col-sm-6 col-xs-8 text-left now-value-value">
										<span class="label label-default" id="dataField-dusk" data-bind="text: sunsetText"></span>
									</div>
								</div>
							</div><!-- end current conditions fluid subcontainer -->
						</div>
						<!-- END Current Values Table -->
					
						<!-- BEGIN Current Zone Display -->
						<div class="col-lg-4 col-md-6 col-sm-12 col-xs-12 text-center center-block">
							<h2 id="zoneColTitle">Zone</h2>
							<div class="container-fluid" id="zone-data-container">
								<div class="row">
									<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
										<span class="label label-default" id="dataField-zone"
											data-bind="{ text: zoneDisplay, style: { 'background-color': zoneColor } }">
										</span>
									</div>
								</div>
							</div>
						</div>
						<!-- END Current Zone Display -->
					
						<!-- BEGIN Safety Values Table -->
						<div class="col-lg-4 col-md-12 col-sm-12 col-xs-12 text-center">
							<h2>Safety Rules</h2>
							<div class="container-fluid" id="rules-data-container">
								<!-- shell types -->
								<div class="row rules-value-row">
									<div class="col-lg-4 col-md-4 col-sm-3 col-xs-1 text-right rules-value-name">
										<span class="label label-info">Shell Types</span>
									</div>
									<div class="col-lg-8 col-md-8 col-sm-9 col-xs-12 col-md-offset-0 col-sm-offset-0 col-xs-offset-1 text-left rules-value-value">
										<span id="dataField-shells" data-bind="text: shellTypes"></span>
									</div>
								</div>
								<!-- crew skill level -->
								<div class="row rules-value-row">
									<div class="col-lg-4 col-md-4 col-sm-3 col-xs-1 text-right rules-value-name">
										<span class="label label-info">Skill Level</span>
									</div>
									<div class="col-lg-8 col-md-8 col-sm-9 col-xs-12 col-md-offset-0 col-sm-offset-0 col-xs-offset-1 text-left rules-value-value">
										<span id="dataField-skill"  data-bind="text: crewSkill"></span>
									</div>
								</div>
								<!-- coaches' launch:shell ratio -->
								<div class="row rules-value-row">
									<div class="col-lg-4 col-md-4 col-sm-3 col-xs-1 text-right rules-value-name">
										<span class="label label-info">Launches</span>
									</div>
									<div class="col-lg-8 col-md-8 col-sm-9 col-xs-12 col-md-offset-0 col-sm-offset-0 col-xs-offset-1 text-left rules-value-value">
										<span id="dataField-launches" data-bind="text: launchRatio"></span>
									</div>
								</div>
								<!-- coach certification -->
								<div class="row rules-value-row">
									<div class="col-lg-4 col-md-4 col-sm-3 col-xs-1 text-right rules-value-name">
										<span class="label label-info">Coaches</span>
									</div>
									<div class="col-lg-8 col-md-8 col-sm-9 col-xs-12 col-md-offset-0 col-sm-offset-0 col-xs-offset-1 text-left rules-value-value">
										<span id="dataField-coaches" data-bind="text: coachCert"></span>
									</div>
								</div>
								<!-- safety gear/equipment -->
								<div class="row rules-value-row">
									<div class="col-lg-4 col-md-4 col-sm-3 col-xs-1 text-right rules-value-name">
										<span class="label label-info">Safety Gear</span>
									</div>
									<div class="col-lg-8 col-md-8 col-sm-9 col-xs-12 col-md-offset-0 col-sm-offset-0 col-xs-offset-1 text-left rules-value-value">
										<span id="dataField-pdfReq" data-bind="text: pfdReq"></span><br />
										<span id="dataField-commsEquip"  data-bind="text: commsEquip"></span><br />
										<span id="dataField-safetyExtras"  data-bind="text: additionalSafety"></span>
									</div>
								</div>
							</div>
						</div>
						<!-- END Safety Values Table -->
						
					</div>
					<!--  END Current Conditions & Rules Row -->
					
					<!-- BEGIN Footnote for zone 6 -->
					<div class="row bottom-border" id="footnoteRow" data-bind="visible: footnoteVisible">
						<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12" data-bind="html: footnoteHtml"></div>
					</div>
					<!-- END footnote for zone 6 -->
					
					<!-- BEGIN Recent Conditions Graph Row 
					<div class="row center-block" id="graphRow" data-bind="visible: graphEnabled">
						<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 text-center" id="graphRow">
							<h2>Recent Conditions</h2>
							<div class="graph-data-container">
								<canvas id="graphCanvas"></canvas>
							</div>
						</div>
					</div>
					 END Recent Conditions Graph Row -->

					<!-- BEGIN Data attribution section -->
					<div class="row text-center bottom-border" id="attributionRow">
						<div class="col-lg-1 col-md-1 col-sm-1 col-xs-1 text-center">
							<h4 class="attributionHeader">Data from:</h4>
						</div>
						<div class="col-lg-1 col-md-1 col-sm-1 col-xs-1 attribution-logo-container text-center center-block">
							<a href="https://www.usgs.gov/products/data-and-tools/real-time-data/water" target="_blank">
								<img class="attribution-logo" src="media/usgs-logo.png" />
							</a>
						</div>
						<div class="col-lg-1 col-md-1 col-sm-1 col-xs-1 attribution-logo-container text-center center-block">
							<a href="https://water.weather.gov/ahps/" target="_blank">
								<img class="attribution-logo" src="media/noaa-logo.png" />
							</a>
						
						</div>
						<div class="col-lg-1 col-md-1 col-sm-1 col-xs-1 attribution-logo-container text-center center-block">
							<a href="https://sunrise-sunset.org" target="_blank">
								<img class="attribution-logo" src="media/sunrs-logo.png" />
							</a>
						</div>
						<div class="col-lg-1 col-md-1 col-sm-1 col-xs-1 attribution-logo-container text-center center-block">
							<a href="http://threeriversrowing.org/safety/weather-and-water-flow/" target="_blank">
								<img class="attribution-logo" src="media/trra-logo.png" />
							</a>
						</div>
						
						<div class="col-lg-1 col-md-1 col-sm-1 col-xs-1 text-center">
							<h4 class="attributionHeader">Built with:</h4>
						</div>
						<div class="col-lg-1 col-md-1 col-sm-1 col-xs-1 attribution-logo-container text-center center-block">
							<a href="https://getbootstrap.com/docs/3.3/" target="_blank">
								<img class="attribution-logo" src="media/bootstrap-logo.png" />
							</a>
						</div>
						<div class="col-lg-2 col-md-2 col-sm-2 col-xs-2 attribution-logo-container text-center center-block">
							<a href="http://jquery.com" target="_blank">
								<img class="attribution-logo" src="media/jquery-logo.png" />
							</a>
						</div>
						<div class="col-lg-2 col-md-2 col-sm-2 col-xs-2 attribution-logo-container text-center center-block">
							<a href="http://knockoutjs.com/index.html" target="_blank">
								<img class="attribution-logo" src="media/knockout-logo.png" />
							</a>
						</div>
						<div class="col-lg-1 col-md-1 col-sm-1 col-xs-1 attribution-logo-container text-center center-block">
							<a href="http://momentjs.com" target="_blank">
								<img class="attribution-logo" src="media/moment-logo.png" />
							</a>
						</div>
					</div>
					<!-- END Data attribution row -->
					
					<!-- BEGIN copyright row -->
					<div class="row" id="copyrightRow">
						<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 text-center">
							<span>Â© 2018 by Maxwell Garber.</span><br />
							<span>This site is intended for use only by staff, members, and guests of Three Rivers Rowing Association.</span><br />
							<span>It is not intended to be a substitute for evaluating safety conditions using good judgement,
								and therefore assumes no liability if you do something stupid and/or dangerous.</span>
						</div>
					</div>
					<!-- END copyright row -->
					
					<!-- BEGIN bottom gutter -->
					<div class="row" id="bottom-gutter">
						<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 text-center"></div>
					</div>
					<!-- END bottom gutter -->
				</div>
			</div>
		</div>
	</body>
</html>
<!-- EOF -->
